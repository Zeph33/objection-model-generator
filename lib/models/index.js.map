{"version":3,"sources":["../../src/models/index.js"],"names":["dbName","KeyColumnUsage","Model","ColumnModel","constrain","relation","BelongsToOneRelation","modelClass","filter","query","where","whereNotNull","join","from","to","TableModel","columns","HasManyRelation","name"],"mappings":"2hCAIIA,c,CAESC,c,SAAAA,c,oOACY,CACrB,MAAO,kBACR,C,OAHiCC,gB,EAMvBC,W,SAAAA,W,oOACY,CACrB,MAAO,SACR,C,0CAC6B,CAC5B,MAAO,CACLC,UAAW,CACTC,SAAUH,iBAAMI,oBADP,CAETC,WAAYN,cAFH,CAGTO,OAAQ,oBAASC,GAAMC,KAAN,CAAY,cAAZ,CAA4BV,MAA5B,EAAoCW,YAApC,CAAiD,wBAAjD,CAAT,CAHC,CAITC,KAAM,CACJC,KAAM,CAAC,qBAAD,CAAwB,oBAAxB,CADF,CAEJC,GAAI,CAAC,8BAAD,CAAiC,6BAAjC,CAFA,CAJG,CADN,CAWR,C,OAhB8BZ,gB,EAmBpBa,U,SAAAA,U,oOACY,CACrB,MAAO,QACR,C,0CAC6B,CAC5B,MAAO,CACLC,QAAS,CACPX,SAAUH,iBAAMe,eADT,CAEPV,WAAYJ,WAFL,CAGPK,OAAQ,oBAASC,GAAMC,KAAN,CAAY,cAAZ,CAA4BV,MAA5B,CAAT,CAHD,CAIPY,KAAM,CACJC,KAAM,mBADF,CAEJC,GAAI,oBAFA,CAJC,CADJ,CAWR,C,+BACiBI,C,CAAM,CACtBlB,OAASkB,CACV,C,OAnB6BhB,gB","file":"index.js","sourcesContent":["import {\n  Model\n} from 'objection';\n\nlet dbName;\n\nexport class KeyColumnUsage extends Model {\n  static get tableName() {\n    return 'KEY_COLUMN_USAGE';\n  }\n}\n\nexport class ColumnModel extends Model {\n  static get tableName() {\n    return 'COLUMNS';\n  }\n  static get relationMappings() {\n    return {\n      constrain: {\n        relation: Model.BelongsToOneRelation,\n        modelClass: KeyColumnUsage,\n        filter: query => query.where('TABLE_SCHEMA', dbName).whereNotNull('REFERENCED_COLUMN_NAME'),\n        join: {\n          from: ['COLUMNS.COLUMN_NAME', 'COLUMNS.TABLE_NAME'],\n          to: ['KEY_COLUMN_USAGE.COLUMN_NAME', 'KEY_COLUMN_USAGE.TABLE_NAME']\n        }\n      }\n    };\n  }\n}\n\nexport class TableModel extends Model {\n  static get tableName() {\n    return 'TABLES';\n  }\n  static get relationMappings() {\n    return {\n      columns: {\n        relation: Model.HasManyRelation,\n        modelClass: ColumnModel,\n        filter: query => query.where('TABLE_SCHEMA', dbName),\n        join: {\n          from: 'TABLES.TABLE_NAME',\n          to: 'COLUMNS.TABLE_NAME'\n        }\n      }\n    };\n  }\n  static set dbName(name) {\n    dbName = name;\n  }\n}"]}